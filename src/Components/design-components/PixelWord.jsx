import React, { useMemo } from 'react';

// --- THE 5x8 PIXEL FONT MAP ---
// 1 = Pixel On, 0 = Pixel Off
const FONT_MAP = {
  A: ['01110','10001','10001','11111','10001','10001','10001','00000'],
  B: ['11110','10001','10001','11110','10001','10001','11110','00000'],
  C: ['01110','10001','10000','10000','10000','10001','01110','00000'],
  D: ['11110','10001','10001','10001','10001','10001','11110','00000'],
  E: ['11111','10000','10000','11110','10000','10000','11111','00000'],
  F: ['11111','10000','10000','11110','10000','10000','10000','00000'],
  G: ['01110','10001','10000','10011','10001','10001','01110','00000'],
  H: ['10001','10001','10001','11111','10001','10001','10001','00000'],
  I: ['01110','00100','00100','00100','00100','00100','01110','00000'],
  J: ['00111','00001','00001','00001','00001','10001','01110','00000'],
  K: ['10001','10010','10100','11000','10100','10010','10001','00000'],
  L: ['10000','10000','10000','10000','10000','10000','11111','00000'],
  M: ['10001','11011','10101','10001','10001','10001','10001','00000'],
  N: ['10001','11001','10101','10011','10001','10001','10001','00000'],
  O: ['01110','10001','10001','10001','10001','10001','01110','00000'],
  P: ['11110','10001','10001','11110','10000','10000','10000','00000'],
  Q: ['01110','10001','10001','10001','10101','10010','01101','00000'],
  R: ['11110','10001','10001','11110','10100','10010','10001','00000'],
  S: ['01111','10000','10000','01110','00001','00001','11110','00000'],
  T: ['11111','00100','00100','00100','00100','00100','00100','00000'],
  U: ['10001','10001','10001','10001','10001','10001','01110','00000'],
  V: ['10001','10001','10001','10001','10001','01010','00100','00000'],
  W: ['10001','10001','10001','10001','10101','11011','10001','00000'],
  X: ['10001','10001','01010','00100','01010','10001','10001','00000'],
  Y: ['10001','10001','01010','00100','00100','00100','00100','00000'],
  Z: ['11111','00001','00010','00100','01000','10000','11111','00000'],
  ' ': ['00000','00000','00000','00000','00000','00000','00000','00000'],
  '0': ['01110','10011','10101','10101','10101','11001','01110','00000'],
  '1': ['00100','01100','00100','00100','00100','00100','01110','00000'],
  '2': ['01110','10001','00001','00010','00100','01000','11111','00000'],
  '3': ['11110','00001','00001','00110','00001','00001','11110','00000'],
  '4': ['00010','00110','01010','10010','11111','00010','00010','00000'],
  '5': ['11111','10000','11110','00001','00001','10001','01110','00000'],
  '6': ['01110','10000','11110','10001','10001','10001','01110','00000'],
  '7': ['11111','00001','00010','00100','01000','10000','10000','00000'],
  '8': ['01110','10001','10001','01110','10001','10001','01110','00000'],
  '9': ['01110','10001','10001','10001','01111','00001','01110','00000'],
  '?': ['01110','10001','00010','00100','00100','00000','00100','00000'],
  '.': ['00000','00000','00000','00000','00000','00000','00100','00000'],
  '!': ['00100','00100','00100','00100','00100','00000','00100','00000'],
  '-': ['00000','00000','00000','11111','00000','00000','00000','00000'],
};

const PixelWord = ({ text = "HELLO", size = 4, gap = 1 , color = "white"}) => {
  
  // Convert word to array of characters
  const characters = useMemo(() => {
    return text.toString().toUpperCase().split('');
  }, [text]);

  return (
    <div className="flex" style={{ gap: `${gap * size}px` }}>
      {characters.map((char, charIndex) => {
        // Fallback to '?' if character not found
        const charData = FONT_MAP[char] || FONT_MAP['?'];
        
        return (
          <div 
            key={charIndex} 
            className="grid grid-cols-5"
            // The grid container width is 5 columns * pixel size
            style={{ width: `${5 * size}px` }}
          >
            {/* Iterate over rows */}
            {charData.map((row, rowIndex) => (
              // Iterate over columns (characters in string)
              row.split('').map((pixel, colIndex) => (
                <div
                  key={`${rowIndex}-${colIndex}`}
                  style={{
                    width: `${size}px`,
                    height: `${size}px`,
                    // Only render background if pixel is '1'
                    backgroundColor: pixel === '1' ? `${color}` : 'transparent',
                    // Optional: Add a tiny shadow for "glow" effect since it's pixel art
                    boxShadow: pixel === '1' ? '0 0 2px rgba(255,255,255,0.3)' : 'none'
                  }}
                />
              ))
            ))}
          </div>
        );
      })}
    </div>
  );
};

export default PixelWord;